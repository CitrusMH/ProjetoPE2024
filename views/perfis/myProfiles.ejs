<%- include('../partials/header.ejs') %> <%- include('../partials/nav.ejs') %>

<%if(msg != '') { %>
  <div class="dialog">
    <div class="alert alert-custom text-white mx-auto text-center" role="alert">
      <%= msg %>
    </div>
  </div>
<% } if(perfis.length > 0){%> 

<br><br><br><br>
<div class="container">
  <div class="row">
    <% perfis.forEach(perfil => { %>
      <div class="col-md-4 mt-4">
        <div class="card bg-dark text-white">
          <div class="card-header">
            <%= perfil.nome %>
          </div>
          <div class="card-body">
            <p>Plataforma: <%= perfil.plataforma %></p>
            
            <form method="post" action="./deletar_perfil/<%= perfil.id %>" >
              <a href="" class="btn btn-primary" data-toggle="modal"
                data-target="#<%= perfil.id %>">Editar</a>
              <input type="hidden" name="extra_submit_param" value="extra_submit_value">
              <button type="submit" name="submit_param" value="submit_value" class="btn btn-danger">
                Excluir
              </button>
            </form>
            <div
              class="modal fade"
              id="<%= perfil.id %>"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content bg-dark">
                  <form action="/perfil/editar_perfil/<%= perfil.id %>" method="POST">
                  <!-- Modal header -->
                  <div class="modal-header">
                    <h5 class="modal-title text-light">
                      Editar Perfil
                    </h5>
                  </div>
                  
                  <!-- Modal body -->
                  <div class="modal-body p-8">
                    <div class="form-control bg-transparent">
                      <label class="col-xl-12 m-0 p-0" for="nome" style="color: lightgray">Nome</label>
                      <input class="col-xl-12 m-0 p-0 bg-transparent border-0" type="text" name="nome" id="nome" value="<%= perfil.nome %>">
                    </div>
                    <small>Insira o nome do perfil</small>
                    
                    <label class="col-xl-12 m-0 p-0" for="plataforma" style="color: lightgray">Plataforma</label>
                    <select class="form-control bg-dark text-white" name="plataforma" id="exampleFormControlSelect1" value="<%= perfil.plataforma %>">
                      <option>Riot Client</option>
                      <option>Playstation</option>
                      <option>Xbox</option>]
                      <option>Nintendo</option>
                      <option>Epic Games</option>
                      <option>Steam</option>
                    </select>
                 
                    <small>Escolha alguma plataforma</small>
                  </div>
                    
                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-primary">
                        Editar
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
<% }%> 
<%- include('../partials/footer.ejs') %>

<a class="icon add-perfil"
  data-toggle="modal"
  data-target="#mdl-cadastrar-perfil"
>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#e8eaed">
    <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
  </svg>
</a>

<!-- Modal -->
<div
  class="modal fade"
  id="mdl-cadastrar-perfil"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content bg-dark">
      <form action="/perfil/criar_perfil" method="POST">
      <!-- Modal header -->
      <div class="modal-header">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed">
          <path  d="M720-400v-120H600v-80h120v-120h80v120h120v80H800v120h-80Zm-360-80q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Z"/>
        </svg>
        <h5 class="modal-title text-light">
          Perfil
        </h5>
      </div>
      
      <!-- Modal body -->
      <div class="modal-body p-8">
        <div class="form-control bg-transparent">
          <label class="col-xl-12 m-0 p-0" for="nome" style="color: lightgray">Nome</label>
          <input class="col-xl-12 m-0 p-0 bg-transparent border-0" type="text" name="nome" id="nome">
        </div>
        <small>Insira o nome do perfil</small>
        
        
          <label class="col-xl-12 m-0 p-0" for="plataforma" style="color: lightgray">Plataforma</label>
          <select class="form-control bg-dark text-white" name="plataforma" id="exampleFormControlSelect1">
            <option>Riot Client</option>
            <option>Playstation</option>
            <option>Xbox</option>]
            <option>Nintendo</option>
            <option>Epic Games</option>
            <option>Steam</option>
          </select>
        <small>Escolha alguma plataforma</small>
      </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">
            Cadastrar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>